#Working progress
#ENIGMA.UWU (si, deberia buscar un nombre mejor)
#Made by Airil
import random
import time

#LISTA ORIGINAL#carRandomizar=("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "ñ", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", ",", ".", " ", "'", "!", "¡", "¿", "?", "·", "#", "/", "(", ")", "=", "+", "-", "_", "%", "€", "<", ">", "&", ":", ";", " ")
#LISTA ORIGINAL#caracteres=("a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "ñ", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", ",", ".", " ", "'", "!", "¡", "¿", "?", "·", "#", "/", "(", ")", "=", "+", "-", "_", "%", "€", "<", ">", "&", ":", ";", " ", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "ñ", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0", ",", ".", " ", "'", "!", "¡", "¿", "?", "·", "#", "/", "(", ")", "=", "+", "-", "_", "%", "€", "<", ">", "&", ":", ";", " ")
carRandomizar = ("8", "s", "¡", "6", "0", "5", "c", "ñ", "4", "!", "n", "p", "7", "m", "t", "u", "h", "i", "y", "€", "<", ">", "&", "3", ",", "f", "g", "h", "i", "y", "€", "<", ">", "&", "3", ",", ".", " ", "z", "1", "l", "a", "b", "¿", "?", "2", "'", "o", "j", "k", "+", "-", "_", "%", "v", "9", "q", "r", "w", "x", "d", ";", "e", ")", "=", "g", ":", " ")
caracteres = ("8", "s", "¡", "6", "0", "5", "c", "ñ", "4", "!", "n", "p", "7", "m", "t", "u", "h", "i", "y", "€", "<", ">", "&", "3", ",", "f", "g", "h", "i", "y", "€", "<", ">", "&", "3", ",", ".", " ", "z", "1", "l", "a", "b", "¿", "?", "2", "'", "o", "j", "k", "+", "-", "_", "%", "v", "9", "q", "r", "w", "x", "d", ";", "e", ")", "=", "g", ":", " ", 
              "8", "s", "¡", "6", "0", "5", "c", "ñ", "4", "!", "n", "p", "7", "m", "t", "u", "h", "i", "y", "€", "<", ">", "&", "3", ",", "f", "g", "h", "i", "y", "€", "<", ">", "&", "3", ",", ".", " ", "z", "1", "l", "a", "b", "¿", "?", "2", "'", "o", "j", "k", "+", "-", "_", "%", "v", "9", "q", "r", "w", "x", "d", ";", "e", ")", "=", "g", ":", " ")

while True:
    print("\nEliga lo que quiere hacer:", "\n-Encriptar", "\n-Descifrar")
    opcion = input("Opcion: ")
    
    if opcion.lower() == "encriptar" or opcion.lower() == "e" or opcion == "1":
        c1 = input("\nClave: ")
        clave = list(c1)
        clave2 = list(c1)
        
        ultLetra = 0
        ultLetra = 0
        for i in range(len(clave2)): #randomizas la clave
            clave2[ultLetra] = carRandomizar[random.randint(0, len(carRandomizar)-1)]
            ultLetra = ultLetra + 1

        mensaje = list(input("Mensaje: "))
        longMens = len(mensaje) 
        
        trozos = int(len(clave)) #calcular en cuantos trozos se encriptara individualmente
        parte = int(longMens/trozos)
        num = 0
        numTrozo = 0

        ultLetra = 0
        mensajeEncriptado = ""
        for a in range(longMens): #segun la posicion de la letra la encripta de una forma o de otra
            if mensaje[ultLetra] in carRandomizar:
                #posicion = a ver que formula me invento
                #o lo puedo hacer con un for XD
                for u in range(1, trozos+1):
                    if ultLetra >= parte * (u - 1) and ultLetra < parte * u:
                        numTrozo = u
                        break
        
                num0 = carRandomizar.index(clave2[numTrozo-1])
                if num0 <= carRandomizar.index(clave[numTrozo-1]):
                    num0 += len(carRandomizar)
                num = num0 - carRandomizar.index(clave[numTrozo-1])
                mensajeEncriptado = mensajeEncriptado + str(caracteres[carRandomizar.index(mensaje[a]) + num-1])
            ultLetra += 1 

        espacio = [" "]
        
        mensajeEncriptado = "".join(clave2) + " " + mensajeEncriptado
        print("\n", mensajeEncriptado[::-1], "\n") #lo imprime dado la vuelta para hacerlo un poco mas complicado de descifrar
        time.sleep(4)
        
    elif opcion.lower() == "descifrar" or opcion.lower() == "d":
        pass
    
    else:
        print("\nERROR", "\nVuelva a escribir lo que quiere hacer por favor.")